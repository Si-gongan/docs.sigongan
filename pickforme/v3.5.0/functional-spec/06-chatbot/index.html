<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>06. 챗봇 &amp; 매니저 상담 - 픽포미 v3.5.0</title>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f6f8fa;
            --bg-tertiary: #eaeef2;
            --text-primary: #1f2328;
            --text-secondary: #656d76;
            --accent: #0969da;
            --border: #d0d7de;
            --warning: #9a6700;
            --shadow: rgba(31, 35, 40, 0.12);
            --sidebar-width: 280px;
        }
        [data-theme="dark"] {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --text-primary: #e6edf3;
            --text-secondary: #8b949e;
            --accent: #58a6ff;
            --border: #30363d;
            --warning: #d29922;
            --shadow: rgba(0, 0, 0, 0.3);
        }
        @media (prefers-color-scheme: dark) {
            :root:not([data-theme="light"]) {
                --bg-primary: #0d1117;
                --bg-secondary: #161b22;
                --bg-tertiary: #21262d;
                --text-primary: #e6edf3;
                --text-secondary: #8b949e;
                --accent: #58a6ff;
                --border: #30363d;
                --warning: #d29922;
                --shadow: rgba(0, 0, 0, 0.3);
            }
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.7;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .layout { display: flex; min-height: 100vh; }
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-secondary);
            border-right: 1px solid var(--border);
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            overflow-y: auto;
            padding: 24px 0;
            transition: transform 0.3s ease;
            z-index: 100;
        }
        .sidebar-header { padding: 0 20px 20px; border-bottom: 1px solid var(--border); margin-bottom: 16px; }
        .sidebar-header h1 { font-size: 1.25rem; font-weight: 700; color: var(--text-primary); margin-bottom: 4px; }
        .sidebar-header .version { font-size: 0.85rem; color: var(--text-secondary); }
        .sidebar-nav { padding: 0 12px; }
        .nav-section { margin-bottom: 8px; }
        .nav-section-title { display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; font-size: 0.9rem; font-weight: 600; color: var(--text-secondary); cursor: pointer; border-radius: 6px; transition: background-color 0.2s; }
        .nav-section-title:hover { background: var(--bg-tertiary); }
        .nav-section-title .arrow { font-size: 0.75rem; transition: transform 0.2s; }
        .nav-section.collapsed .arrow { transform: rotate(-90deg); }
        .nav-section.collapsed .nav-items { display: none; }
        .nav-items { list-style: none; padding: 4px 0 4px 8px; }
        .nav-item a { display: block; padding: 8px 12px; font-size: 0.875rem; color: var(--text-secondary); text-decoration: none; border-radius: 6px; transition: all 0.2s; }
        .nav-item a:hover { background: var(--bg-tertiary); color: var(--text-primary); }
        .nav-item.active a { background: var(--accent); color: #fff; font-weight: 500; }
        .nav-link-single { display: block; padding: 10px 12px; font-size: 0.9rem; font-weight: 600; color: var(--text-secondary); text-decoration: none; border-radius: 6px; transition: all 0.2s; margin-bottom: 8px; }
        .nav-link-single:hover { background: var(--bg-tertiary); color: var(--text-primary); }
        .nav-link-single.active { background: var(--accent); color: #fff; }
        .main-content { flex: 1; margin-left: var(--sidebar-width); min-width: 0; }
        .container { max-width: 900px; margin: 0 auto; padding: 40px 24px; }
        .theme-toggle { position: fixed; top: 20px; right: 20px; z-index: 1000; display: flex; align-items: center; gap: 8px; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 50px; padding: 8px 16px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px var(--shadow); color: var(--text-primary); font-family: inherit; }
        .theme-toggle:hover { transform: translateY(-2px); box-shadow: 0 4px 12px var(--shadow); }
        .theme-toggle-icon { font-size: 1rem; font-weight: 600; line-height: 1; }
        .theme-toggle-label { font-size: 0.85rem; color: var(--text-secondary); font-weight: 500; }
        .light-text, .dark-text { display: none; }
        :root:not([data-theme]) .light-text, [data-theme="light"] .light-text { display: inline; }
        [data-theme="dark"] .dark-text { display: inline; }
        [data-theme="dark"] .light-text { display: none; }
        @media (prefers-color-scheme: dark) { :root:not([data-theme]) .light-text { display: none; } :root:not([data-theme]) .dark-text { display: inline; } }
        .menu-toggle { display: none; position: fixed; top: 20px; left: 20px; z-index: 1001; background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px; padding: 10px 12px; cursor: pointer; color: var(--text-primary); font-family: inherit; box-shadow: 0 2px 8px var(--shadow); }
        .menu-toggle:hover { background: var(--bg-tertiary); }
        .sidebar-overlay { display: none; position: fixed; inset: 0; background: rgba(0, 0, 0, 0.5); z-index: 99; }
        .header { text-align: center; padding: 60px 0; border-bottom: 1px solid var(--border); margin-bottom: 48px; }
        .header h1 { font-size: 2.5rem; font-weight: 700; margin-bottom: 16px; color: var(--text-primary); }
        .header .subtitle { font-size: 1.1rem; color: var(--text-secondary); margin-bottom: 8px; }
        .header .meta { font-size: 0.9rem; color: var(--text-secondary); }
        .toc { background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 12px; padding: 24px 32px; margin-bottom: 48px; }
        .toc h2 { font-size: 1.1rem; margin-bottom: 16px; color: var(--text-secondary); border: none; padding: 0; }
        .toc ul { list-style: none; display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; }
        .toc a { color: var(--accent); text-decoration: none; font-size: 0.95rem; }
        .toc a:hover { text-decoration: underline; }
        section { margin-bottom: 64px; }
        h2 { font-size: 1.75rem; font-weight: 700; margin-bottom: 24px; padding-bottom: 12px; border-bottom: 2px solid var(--accent); color: var(--text-primary); }
        h3 { font-size: 1.25rem; font-weight: 600; margin: 32px 0 16px 0; color: var(--text-primary); }
        h4 { font-size: 1.1rem; font-weight: 600; margin: 24px 0 12px 0; color: var(--text-secondary); }
        p { margin-bottom: 16px; color: var(--text-secondary); }
        table { width: 100%; border-collapse: collapse; margin: 16px 0 24px 0; font-size: 0.95rem; }
        th, td { padding: 12px 16px; text-align: left; border: 1px solid var(--border); }
        th { background: var(--bg-tertiary); font-weight: 600; color: var(--text-primary); }
        td { background: var(--bg-secondary); color: var(--text-secondary); }
        .info-box { background: var(--bg-secondary); border-left: 4px solid var(--accent); padding: 16px 20px; margin: 16px 0; border-radius: 0 8px 8px 0; }
        .info-box p { margin: 0; }
        ul, ol { margin: 16px 0; padding-left: 24px; }
        li { margin-bottom: 8px; color: var(--text-secondary); }
        footer { text-align: center; padding: 48px 0; border-top: 1px solid var(--border); color: var(--text-secondary); font-size: 0.9rem; }
        @media (max-width: 1024px) { .sidebar { transform: translateX(-100%); } .sidebar.open { transform: translateX(0); } .sidebar-overlay.open { display: block; } .main-content { margin-left: 0; } .menu-toggle { display: block; } }
        @media (max-width: 768px) { .header h1 { font-size: 1.75rem; } .toc ul { grid-template-columns: 1fr; } .theme-toggle { padding: 6px 12px; } .theme-toggle-label { display: none; } }
    </style>
</head>
<body>
    <button class="menu-toggle" onclick="toggleSidebar()" aria-label="메뉴 열기">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12h18M3 6h18M3 18h18"></path></svg>
    </button>
    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>
    <div class="layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>PickForMe</h1>
                <span class="version">v3.5.0</span>
            </div>
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title" onclick="toggleSection(this)">
                        <span>functional-spec</span>
                        <span class="arrow">&#9662;</span>
                    </div>
                    <ul class="nav-items">
                        <li class="nav-item"><a href="/pickforme/v3.5.0/functional-spec/01-entry">01. 진입 단계</a></li>
                        <li class="nav-item"><a href="/pickforme/v3.5.0/functional-spec/02-home">02. 홈</a></li>
                        <li class="nav-item"><a href="/pickforme/v3.5.0/functional-spec/03-search">03. 검색</a></li>
                        <li class="nav-item"><a href="/pickforme/v3.5.0/functional-spec/04-search-result">04. 검색 결과</a></li>
                        <li class="nav-item"><a href="/pickforme/v3.5.0/functional-spec/05-product-detail">05. 상품 상세</a></li>
                        <li class="nav-item active"><a href="/pickforme/v3.5.0/functional-spec/06-chatbot">06. 챗봇</a></li>
                        <li class="nav-item"><a href="/pickforme/v3.5.0/functional-spec/07-category">07. 카테고리</a></li>
                        <li class="nav-item"><a href="/pickforme/v3.5.0/functional-spec/08-wishlist">08. 위시리스트</a></li>
                        <li class="nav-item"><a href="/pickforme/v3.5.0/functional-spec/09-mypage">09. 마이페이지</a></li>
                    </ul>
                </div>
                <a href="/pickforme/v3.5.0/user-story" class="nav-link-single">user-story</a>
            </nav>
        </aside>
        <main class="main-content">
            <button class="theme-toggle" onclick="toggleTheme()" aria-label="테마 전환">
                <span class="theme-toggle-icon"><span class="light-text">&#9675;</span><span class="dark-text">&#9679;</span></span>
                <span class="theme-toggle-label">테마</span>
            </button>
            <div class="container">
                <header class="header">
                    <h1>06. 챗봇 &amp; 매니저 상담</h1>
                    <p class="subtitle">상품 상세에서 해소되지 않은 궁금증을 해결하는 대화형 인터페이스</p>
                    <p class="meta">최종 수정일: 2025-01-08</p>
                </header>
                <nav class="toc">
                    <h2>목차</h2>
                    <ul>
                        <li><a href="#overview">개요</a></li>
                        <li><a href="#access">멤버십별 접근 권한</a></li>
                        <li><a href="#common">공통 UI 구조</a></li>
                        <li><a href="#ai">모드 1: AI 포미 상담</a></li>
                        <li><a href="#manager">모드 2: 매니저 상담</a></li>
                        <li><a href="#mode-switch">채팅 중 모드 변경</a></li>
                        <li><a href="#popup">멤버십 안내 팝업</a></li>
                        <li><a href="#accessibility">접근성</a></li>
                        <li><a href="#error">예외 처리</a></li>
                    </ul>
                </nav>
                <section id="overview">
                    <h2>개요</h2>
                    <p>상품 상세에서 해소되지 않은 궁금증을 해결하는 대화형 인터페이스.</p>
                    <table>
                        <tr><th>모드</th><th>담당</th><th>응답 속도</th><th>필요 멤버십</th></tr>
                        <tr><td>AI 포미</td><td>AI 챗봇</td><td>즉시</td><td>한 달 무료 체험 / AI포미 패스 / 올인원 패스</td></tr>
                        <tr><td>매니저</td><td>사람 (비동기)</td><td>최대 3시간</td><td>한 달 무료 체험 / 매니저 패스 / 올인원 패스</td></tr>
                    </table>
                    <h3>진입 조건</h3>
                    <table>
                        <tr><th>조건</th><th>설명</th></tr>
                        <tr><td>상품 상세 [질문하기]</td><td>상세 → 챗봇</td></tr>
                        <tr><td>멤버십 상태 확인</td><td>모드별 접근 권한 검증</td></tr>
                    </table>
                </section>
                <section id="access">
                    <h2>멤버십별 접근 권한 및 시작 화면</h2>
                    <h3>시작 모드</h3>
                    <table>
                        <tr><th>멤버십 상태</th><th>시작 모드</th></tr>
                        <tr><td>무료 유저 (체험 중)</td><td>AI 모드</td></tr>
                        <tr><td>무료 유저 (체험 종료)</td><td>멤버십 가입 유도</td></tr>
                        <tr><td>AI포미 패스</td><td>AI 모드</td></tr>
                        <tr><td>매니저 패스</td><td>매니저 모드</td></tr>
                        <tr><td>올인원 패스</td><td>AI 모드</td></tr>
                    </table>
                    <h3>탭 접근 권한</h3>
                    <table>
                        <tr><th>멤버십 상태</th><th>AI 포미 탭</th><th>매니저 탭</th></tr>
                        <tr><td>무료 유저 (체험 중)</td><td>무제한</td><td>무제한</td></tr>
                        <tr><td>무료 유저 (체험 종료)</td><td>잠금 (가입 유도)</td><td>잠금 (가입 유도)</td></tr>
                        <tr><td>AI포미 패스</td><td>무제한</td><td>잠금 (업그레이드 유도)</td></tr>
                        <tr><td>매니저 패스</td><td>잠금 (업그레이드 유도)</td><td>무제한</td></tr>
                        <tr><td>올인원 패스</td><td>무제한</td><td>무제한</td></tr>
                    </table>
                </section>
                <section id="common">
                    <h2>공통 UI 구조</h2>
                    <h3>상단 헤더 (Sticky)</h3>
                    <p>대화 중에도 어떤 상품에 대해 질문 중인지 표시</p>
                    <table>
                        <tr><th>요소</th><th>설명</th></tr>
                        <tr><td>뒤로가기(&lt;)</td><td>상품 상세 페이지 복귀</td></tr>
                        <tr><td>상품 정보</td><td>상품명</td></tr>
                    </table>
                    <h3>모드 전환 탭 (Mode Switcher)</h3>
                    <p>메시지 입력창 바로 위에 위치. 알약 모양(Pill-shape) 탭.</p>
                    <table>
                        <tr><th>탭</th><th>상태</th><th>설명</th></tr>
                        <tr><td>AI</td><td>기본 활성 (선택 시 배경색)</td><td>AI 모드</td></tr>
                        <tr><td>매니저</td><td>비활성</td><td>매니저 모드</td></tr>
                    </table>
                    <h3>입력 영역 (Input Area)</h3>
                    <table>
                        <tr><th>요소</th><th>AI 모드</th><th>매니저 모드</th></tr>
                        <tr><td>Placeholder</td><td>"AI에게 궁금한 점을 물어보세요"</td><td>"매니저에게 궁금한 점을 물어보세요"</td></tr>
                    </table>
                    <h4>입력 방식</h4>
                    <table>
                        <tr><th>상태</th><th>우측 아이콘</th><th>액션</th></tr>
                        <tr><td>입력 전</td><td>마이크</td><td>STT 음성 인식 실행</td></tr>
                        <tr><td>입력 중</td><td>전송</td><td>메시지 전송</td></tr>
                    </table>
                </section>
                <section id="ai">
                    <h2>모드 1: AI 포미 상담</h2>
                    <h3>초기 진입 (Initial State)</h3>
                    <table>
                        <tr><th>요소</th><th>내용</th></tr>
                        <tr><td>시스템 메시지</td><td>픽포미 로고 + "안녕하세요 저는 AI 포미예요! 상품에 대해 어떤 점이 궁금하세요?"</td></tr>
                        <tr><td>날짜 구분선</td><td>"25년 12월 17일"</td></tr>
                    </table>
                    <h3>질문 전송 및 답변</h3>
                    <h4>전송 직후</h4>
                    <table>
                        <tr><th>위치</th><th>내용</th></tr>
                        <tr><td>우측</td><td>사용자 말풍선 + 시간</td></tr>
                        <tr><td>좌측</td><td>"정보 찾는 중.." (로딩 애니메이션)</td></tr>
                    </table>
                    <h4>답변 완료</h4>
                    <table>
                        <tr><th>위치</th><th>내용</th></tr>
                        <tr><td>좌측</td><td>AI 답변 말풍선</td></tr>
                        <tr><td>하단</td><td>피드백 버튼들</td></tr>
                    </table>
                    <h3>답변 피드백 (Feedback Actions)</h3>
                    <p>AI 답변 말풍선 하단에 피드백 버튼 구성</p>
                    <table>
                        <tr><th>버튼</th><th>아이콘/텍스트</th><th>액션</th></tr>
                        <tr><td>복사</td><td>복사 아이콘</td><td>답변 텍스트 클립보드 복사</td></tr>
                        <tr><td>좋아요</td><td>엄지 위 아이콘</td><td>좋았던 점 선택 바텀 시트</td></tr>
                        <tr><td>아쉬워요</td><td>엄지 아래 아이콘</td><td>아쉬웠던 점 선택 바텀 시트</td></tr>
                        <tr><td>답변 평가하기</td><td>텍스트 버튼</td><td>피드백 바텀 시트 호출</td></tr>
                    </table>
                </section>
                <section id="manager">
                    <h2>모드 2: 매니저 상담</h2>
                    <h3>매니저 첫 질문 안내 팝업</h3>
                    <p>매니저 모드 처음 사용 시 한 번만 표시</p>
                    <table>
                        <tr><th>요소</th><th>내용</th></tr>
                        <tr><td>타이틀</td><td>"매니저에게 질문하기"</td></tr>
                        <tr><td>설명</td><td>"매니저가 질문을 확인하고 직접 답변해 드려요. 보통 3시간 이내에 답변을 받을 수 있어요"</td></tr>
                        <tr><td>버튼</td><td>[확인했어요] → 팝업 닫힘</td></tr>
                    </table>
                    <h3>접수 완료 카드</h3>
                    <table>
                        <tr><th>요소</th><th>내용</th></tr>
                        <tr><td>상태 뱃지</td><td>`확인 중` (회색 박스)</td></tr>
                        <tr><td>문구</td><td>"질문이 전송되었어요! 답변이 오면 알림으로 알려드려요"</td></tr>
                        <tr><td>응답 시간</td><td>"3시간 내 답변을 받을 수 있어요"</td></tr>
                        <tr><td>알림 설정 버튼</td><td>[알림 설정하기] - 알림 권한 없는 경우만 노출</td></tr>
                    </table>
                </section>
                <section id="mode-switch">
                    <h2>채팅 중 모드 변경</h2>
                    <p>토글을 통해 AI / 매니저 모드 전환 시, 해당 모드의 시스템 메시지가 자동 전송됨</p>
                    <table>
                        <tr><th>전환</th><th>자동 메시지</th></tr>
                        <tr><td>AI → 매니저</td><td>"매니저에게 질문할래요" + 매니저 인사 메시지</td></tr>
                        <tr><td>매니저 → AI</td><td>AI 포미 인사 메시지</td></tr>
                    </table>
                </section>
                <section id="popup">
                    <h2>멤버십 안내 팝업 (Bottom Sheet)</h2>
                    <h3>공통 UI</h3>
                    <ul>
                        <li><strong>형태:</strong> 바텀 시트 (Bottom Sheet)</li>
                        <li><strong>포커스 트랩:</strong> 팝업 내부로만 포커스 이동</li>
                    </ul>
                    <h3>Case A: 올인원 패스 필요</h3>
                    <p><strong>조건:</strong> AI포미 패스 유저가 매니저 탭 터치 또는 매니저 패스 유저가 AI 탭 터치</p>
                    <table>
                        <tr><th>요소</th><th>내용</th></tr>
                        <tr><td>타이틀</td><td>"올인원 패스가 필요해요"</td></tr>
                        <tr><td>내용</td><td>"올인원 패스로 업그레이드하면 AI와 매니저에게 모두 질문할 수 있어요."</td></tr>
                        <tr><td>버튼 1</td><td>[멤버십 업그레이드 하기] → 멤버십 화면 이동</td></tr>
                        <tr><td>버튼 2</td><td>[닫기] → 팝업 닫힘</td></tr>
                    </table>
                    <h3>Case B: 무료 체험 종료</h3>
                    <table>
                        <tr><th>요소</th><th>내용</th></tr>
                        <tr><td>타이틀</td><td>"무료 체험이 종료되었어요"</td></tr>
                        <tr><td>내용</td><td>"한 달 무료 체험이 종료되었어요. 계속 질문하려면 멤버십이 필요해요."</td></tr>
                        <tr><td>버튼 1</td><td>[멤버십 구경하기] → 멤버십 화면 이동</td></tr>
                        <tr><td>버튼 2</td><td>[닫기] → 팝업 닫힘</td></tr>
                    </table>
                </section>
                <section id="accessibility">
                    <h2>접근성</h2>
                    <h3>탭 전환 (Tab Switching)</h3>
                    <table>
                        <tr><th>상황</th><th>안내</th></tr>
                        <tr><td>AI 탭 선택됨</td><td>"AI 탭, 선택됨. AI와 대화하기."</td></tr>
                        <tr><td>매니저 탭 선택 가능</td><td>"매니저 탭, 선택 안 됨. 매니저에게 질문하기."</td></tr>
                        <tr><td>매니저 탭 잠금</td><td>"매니저 탭, 잠금. 매니저 패스 또는 올인원 패스가 필요합니다."</td></tr>
                    </table>
                    <h3>메시지 읽기</h3>
                    <table>
                        <tr><th>상황</th><th>처리</th></tr>
                        <tr><td>새 메시지 도착</td><td>자동 읽기 (Live Region): "픽포미 매니저의 새로운 메시지: 안녕하세요..."</td></tr>
                        <tr><td>AI 로딩 중</td><td>"정보를 찾는 중입니다..." 주기적 안내</td></tr>
                    </table>
                </section>
                <section id="error">
                    <h2>예외 처리</h2>
                    <table>
                        <tr><th>상황</th><th>처리</th></tr>
                        <tr><td>네트워크 오류</td><td>말풍선 옆 빨간 느낌표(!) + [재전송] 버튼</td></tr>
                        <tr><td>입력 글자 수 초과</td><td>1000자 제한. 초과 시 입력 불가 + 토스트</td></tr>
                        <tr><td>금칙어 포함</td><td>전송 차단 + "바른 말을 사용해주세요" 경고</td></tr>
                        <tr><td>결제 실패</td><td>"결제에 실패했습니다. 다시 시도해주세요." 토스트</td></tr>
                    </table>
                </section>
                <footer>
                    <p>&copy; 2025 Sigongan. All rights reserved.</p>
                </footer>
            </div>
        </main>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
        function getSystemTheme() { return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'; }
        function getCurrentTheme() { return localStorage.getItem('theme') || null; }
        function setTheme(theme) { if (theme === null) { document.documentElement.removeAttribute('data-theme'); localStorage.removeItem('theme'); } else { document.documentElement.setAttribute('data-theme', theme); localStorage.setItem('theme', theme); } }
        function toggleTheme() { const c = getCurrentTheme(), s = getSystemTheme(); if (c === null) setTheme(s === 'dark' ? 'light' : 'dark'); else if (c === 'dark') setTheme('light'); else setTheme('dark'); }
        function toggleSidebar() { document.querySelector('.sidebar').classList.toggle('open'); document.querySelector('.sidebar-overlay').classList.toggle('open'); }
        function toggleSection(el) { el.parentElement.classList.toggle('collapsed'); }
        document.addEventListener('DOMContentLoaded', () => { const t = getCurrentTheme(); if (t) document.documentElement.setAttribute('data-theme', t); });
    </script>
</body>
</html>
